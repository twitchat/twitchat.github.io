!function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";t.exports={client:e("./lib/client")}},{"./lib/client":3}],2:[function(e,t,n){(function(n){"use strict";var r="undefined"!=typeof window?window.request:"undefined"!=typeof n?n.request:null,i=e("./utils"),s=function(e,t){var n="undefined"==typeof e.url?"":e.url;if(""===n&&(n="undefined"==typeof e.uri?"":e.uri),i.isURL(n)||(n="/"!==n.charAt(0)?"https://api.twitch.tv/kraken/"+n:"https://api.twitch.tv/kraken"+n),e.url=n,i.isNodeJS()){var s={url:n,method:"GET"};r(i.mergeRecursive(s,e),function(e,n,r){t(e,n,r)})}else{var o="jsonp_callback_"+Math.round(1e5*Math.random());window[o]=function(e){delete window[o],document.body.removeChild(a),t(null,null,e)};var a=document.createElement("script");a.src=n+(n.indexOf("?")>=0?"&":"?")+"callback="+o,document.body.appendChild(a)}};t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":9}],3:[function(e,t,n){(function(n){"use strict";var r=e("./api"),i=e("./commands"),s="undefined"!=typeof window?window.cron:"undefined"!=typeof n?n.cron:null,o=e("./events").EventEmitter,a="undefined"!=typeof window?window.locallydb:"undefined"!=typeof n?n.locallydb:null,u=e("./logger"),c=e("irc-message").parse,l=e("./server"),f=e("./timer"),h=e("util"),p=e("./utils"),d=n.WebSocket||n.MozWebSocket||e("ws"),m=e("underscore"),g=function y(e){if(this instanceof y==!1)return new y(e);this.setMaxListeners(0),this.opts="undefined"==typeof e?{}:e,this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.reconnecting=!1,this.reconnectTimer=0,this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;var t="error";this.opts.options.debug&&(t="info"),this.log=this.opts.logger||u.createLogger("tmi.js",t,"raw"),this.opts.channels.forEach(function(e,t,n){n[t]=p.normalizeChannel(e)}),"undefined"!=typeof this.opts.connection.random&&(this.opts.connection.cluster=this.opts.connection.random,this.log.warn("connection.random is deprecated, please use connection.cluster instead.")),o.call(this)};h.inherits(g,o),g.prototype.api=r;for(var v in i)g.prototype[v]=i[v];String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),g.prototype.handleMessage=function(e){var t=this;if(null!==e){if(m.isString(e.tags.emotes)){for(var n=e.tags.emotes.split("/"),r={},i=0;i<n.length;i++){var s=n[i].split(":");r[s[0]]=s[1].split(",")}e.tags["emotes-raw"]=e.tags.emotes,e.tags.emotes=r}if(m.isBoolean(e.tags.emotes)&&(e.tags["emotes-raw"]=null),e.tags)for(var o in e.tags)"emote-sets"!==o&&(m.isBoolean(e.tags[o])?e.tags[o]=null:"1"===e.tags[o]?e.tags[o]=!0:"0"===e.tags[o]&&(e.tags[o]=!1));if(m.isNull(e.prefix))switch(e.command){case"PING":this.emit("ping"),m.isNull(this.ws)||2===this.ws.readyState||3===this.ws.readyState||this.ws.send("PONG");break;case"PONG":var a=new Date;this.currentLatency=(a.getTime()-this.latency.getTime())/1e3,this.emit("pong",this.currentLatency),this.emit("_promisePing",this.currentLatency),clearTimeout(this.pingTimeout);break;default:this.log.warn("Could not parse message with no prefix:\n"+JSON.stringify(e,null,4))}else if("tmi.twitch.tv"===e.prefix)switch(e.command){case"002":case"003":case"004":case"375":case"376":case"CAP":break;case"001":this.username=e.params[0];break;case"372":this.log.info("Connected to server."),this.userstate["#jtv"]={},this.emit("connected",this.server,this.port),this.emit("_promiseConnect",null),this.reconnectTimer=0,this.pingLoop=setInterval(function(){m.isNull(t.ws)||2===t.ws.readyState||3===t.ws.readyState||t.ws.send("PING"),t.latency=new Date,t.pingTimeout=setTimeout(function(){m.isNull(t.ws)||(t.wasCloseCalled=!1,t.log.error("Ping timeout."),t.ws.close(),clearInterval(t.pingLoop),clearTimeout(t.pingTimeout))},"undefined"==typeof t.opts.connection.timeout?9999:t.opts.connection.timeout)},6e4);var u=new f.queue(2e3),c=m.union(this.opts.channels,this.channels);this.channels=[];for(var i=0;i<c.length;i++){var l=this;u.add(function(e){m.isNull(l.ws)||2===l.ws.readyState||3===l.ws.readyState||l.ws.send("JOIN "+p.normalizeChannel(c[e]))}.bind(this,i))}u.run();break;case"NOTICE":var h=e.tags["msg-id"]||null;switch(h){case"subs_on":this.log.info("["+e.params[0]+"] This room is now in subscribers-only mode."),this.emit("subscriber",e.params[0],!0),this.emit("subscribers",e.params[0],!0),this.emit("_promiseSubscribers",null);break;case"subs_off":this.log.info("["+e.params[0]+"] This room is no longer in subscribers-only mode."),this.emit("subscriber",e.params[0],!1),this.emit("subscribers",e.params[0],!1),this.emit("_promiseSubscribersoff",null);break;case"emote_only_on":this.log.info("["+e.params[0]+"] This room is now in emote-only mode."),this.emit("emoteonly",e.params[0],!0),this.emit("_promiseEmoteonly",null);break;case"emote_only_off":this.log.info("["+e.params[0]+"] This room is no longer in emote-only mode."),this.emit("emoteonly",e.params[0],!1),this.emit("_promiseEmoteonlyoff",null);break;case"slow_on":case"slow_off":break;case"r9k_on":this.log.info("["+e.params[0]+"] This room is now in r9k mode."),this.emit("r9kmode",e.params[0],!0),this.emit("r9kbeta",e.params[0],!0),this.emit("_promiseR9kbeta",null);break;case"r9k_off":this.log.info("["+e.params[0]+"] This room is no longer in r9k mode."),this.emit("r9kmode",e.params[0],!1),this.emit("r9kbeta",e.params[0],!1),this.emit("_promiseR9kbetaoff",null);break;case"room_mods":for(var d=e.params[1].split(":"),g=d[1].replace(/,/g,"").split(":").toString().toLowerCase().split(" "),i=g.length-1;i>=0;i--)""===g[i]&&g.splice(i,1);this.emit("_promiseMods",null,g),this.emit("mods",e.params[0],g);break;case"no_mods":this.emit("_promiseMods",null,[]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseBan",e.params[1]);break;case"ban_success":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseBan",null);break;case"usage_clear":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseClear",e.params[1]);break;case"usage_mods":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseMods",e.params[1],[]);break;case"mod_success":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseMod",null);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseMod",e.params[1]);break;case"unmod_success":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseUnmod",null);break;case"usage_unmod":case"bad_unmod_mod":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseUnmod",e.params[1]);break;case"color_changed":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseColor",null);break;case"usage_color":case"turbo_only_color":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseColor",e.params[1]);break;case"commercial_success":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseCommercial",null);break;case"usage_commercial":case"bad_commercial_error":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseCommercial",e.params[1]);break;case"hosts_remaining":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]);var v=isNaN(e.params[1].charAt(0))?0:e.params[1].charAt(0);this.emit("_promiseHost",null,v);break;case"bad_host_hosting":case"bad_host_rate_exceeded":case"usage_host":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseHost",e.params[1],null);break;case"already_r9k_on":case"usage_r9k_on":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseR9kbeta",e.params[1]);break;case"already_r9k_off":case"usage_r9k_off":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseR9kbetaoff",e.params[1]);break;case"timeout_success":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseTimeout",null);break;case"already_subs_off":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseSubscribersoff",e.params[1]);break;case"already_subs_on":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseSubscribers",e.params[1]);break;case"already_emote_only_off":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseEmoteonlyoff",e.params[1]);break;case"already_emote_only_on":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseEmoteonly",e.params[1]);break;case"usage_slow_on":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseSlow",e.params[1]);break;case"usage_slow_off":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseSlowoff",e.params[1]);break;case"usage_subs_on":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseSubscribers",e.params[1]);break;case"usage_subs_off":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseSubscribersoff",e.params[1]);break;case"usage_emote_only_on":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseEmoteonly",e.params[1]);break;case"usage_emote_only_off":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseEmoteonlyoff",e.params[1]);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_broadcaster":case"bad_timeout_global_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseTimeout",e.params[1]);break;case"unban_success":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseUnban",null);break;case"usage_unban":case"bad_unban_no_ban":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseUnban",e.params[1]);break;case"usage_unhost":case"not_hosting":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseUnhost",e.params[1]);break;case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted_recipient":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseWhisper",e.params[1]);break;case"no_permission":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),this.emit("_promiseBan",e.params[1]),this.emit("_promiseClear",e.params[1]),this.emit("_promiseUnban",e.params[1]),this.emit("_promiseTimeout",e.params[1]),this.emit("_promiseMod",e.params[1]),this.emit("_promiseUnmod",e.params[1]),this.emit("_promiseCommercial",e.params[1]),this.emit("_promiseHost",e.params[1],null),this.emit("_promiseR9kbeta",e.params[1]),this.emit("_promiseR9kbetaoff",e.params[1]),this.emit("_promiseSlow",e.params[1]),this.emit("_promiseSlowoff",e.params[1]),this.emit("_promiseSubscribers",e.params[1]),this.emit("_promiseSubscribersoff",e.params[1]),this.emit("_promiseEmoteonly",e.params[1]),this.emit("_promiseEmoteonlyoff",e.params[1]);break;case"unrecognized_cmd":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]),"/w"===e.params[1].split(" ").splice(-1)[0]&&this.log.warn("You must be connected to a group server to send or receive whispers.");break;case"cmds_available":case"host_target_went_offline":case"msg_banned":case"msg_duplicate":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]);break;case"host_on":case"host_off":break;default:e.params[1].includes("Login unsuccessful")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Login unsuccessful.",this.log.error(this.reason),this.ws.close()):e.params[1].includes("Error logging in")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Error logging in.",this.log.error(this.reason),this.ws.close()):e.params[1].includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):this.log.warn("Could not parse NOTICE from tmi.twitch.tv:\n"+JSON.stringify(e,null,4))}break;case"HOSTTARGET":if("-"===e.params[1].split(" ")[0])this.log.info("["+e.params[0]+"] Exited host mode."),this.emit("unhost",e.params[0],e.params[1].split(" ")[1]||"0"),this.emit("_promiseUnhost",null);else{var y=e.params[1].split(" ")[1]||0;p.isInteger(y)||(y=0),this.log.info("["+e.params[0]+"] Now hosting "+e.params[1].split(" ")[0]+" for "+y+" viewer(s)."),this.emit("hosting",e.params[0],e.params[1].split(" ")[0],y)}break;case"CLEARCHAT":e.params.length>1?(this.log.info("["+e.params[0]+"] "+e.params[1]+" has been timed out."),this.emit("timeout",e.params[0],e.params[1])):(this.log.info("["+e.params[0]+"] Chat was cleared by a moderator."),this.emit("clearchat",e.params[0]),this.emit("_promiseClear",null));break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info("Disconnecting and reconnecting in "+this.reconnectTimer/1e3+" seconds.."),this.disconnect(),setTimeout(function(){t.connect()},this.reconnectTimer);break;case"SERVERCHANGE":this.log.warn("Channel "+e.params[0]+" isn't or no longer located on this cluster."),this.log.warn("Read more: https://www.tmijs.org/forums/index.php?/topic/39-channel-specific-chat-server-clusters/"),this.emit("serverchange",e.params[0]);break;case"USERSTATE":e.tags.username=this.username,"mod"===e.tags["user-type"]&&(this.moderators[this.lastJoined]||(this.moderators[this.lastJoined]=[]),this.moderators[this.lastJoined].indexOf(this.username)<0&&this.moderators[this.lastJoined].push(this.username)),this.getUsername().includes("justinfan")||this.userstate[p.normalizeChannel(e.params[0])]||(this.userstate[e.params[0]]=e.tags,this.lastJoined=e.params[0],this.channels.push(e.params[0]),this.log.info("Joined "+e.params[0]),this.emit("join",e.params[0],p.normalizeUsername(this.getUsername())),this.emit("_promiseJoin",null)),this.userstate[e.params[0]]=e.tags;break;case"GLOBALUSERSTATE":this.globaluserstate=e.tags,"undefined"!=typeof e.tags["emote-sets"]&&this.emit("emotesets",e.tags["emote-sets"]);break;case"ROOMSTATE":e.tags.channel=this.lastJoined,this.emit("roomstate",e.params[0],e.tags),e.tags.hasOwnProperty("slow")&&!e.tags.hasOwnProperty("subs-only")&&("boolean"==typeof e.tags.slow?(this.log.info("["+e.params[0]+"] This room is no longer in slow mode."),this.emit("slow",e.params[0],!1,"0"),this.emit("slowmode",e.params[0],!1,"0"),this.emit("_promiseSlowoff",null)):(this.log.info("["+e.params[0]+"] This room is now in slow mode."),this.emit("slow",e.params[0],!0,e.tags.slow),this.emit("slowmode",e.params[0],!0,e.tags.slow),this.emit("_promiseSlow",null)));break;default:this.log.warn("Could not parse message from tmi.twitch.tv:\n"+JSON.stringify(e,null,4))}else if("jtv"===e.prefix)switch(e.command){case"MODE":"+o"===e.params[1]?(this.moderators[e.params[0]]||(this.moderators[e.params[0]]=[]),this.moderators[e.params[0]].indexOf(e.params[2])<0&&this.moderators[e.params[0]].push(e.params[2]),this.emit("mod",e.params[0],e.params[2])):"-o"===e.params[1]&&(this.moderators[e.params[0]]||(this.moderators[e.params[0]]=[]),this.moderators[e.params[0]].filter(function(t){return t!=e.params[2]}),this.emit("unmod",e.params[0],e.params[2]));break;default:this.log.warn("Could not parse message from jtv:\n"+JSON.stringify(e,null,4))}else switch(e.command){case"353":this.emit("names",e.params[2],e.params[3].split(" "));break;case"366":break;case"JOIN":this.getUsername().includes("justinfan")&&this.username===e.prefix.split("!")[0]&&(this.lastJoined=e.params[0],this.channels.push(e.params[0]),this.log.info("Joined "+e.params[0]),this.emit("join",e.params[0],e.prefix.split("!")[0]),this.emit("_promiseJoin",null)),this.username!==e.prefix.split("!")[0]&&this.emit("join",e.params[0],e.prefix.split("!")[0]);break;case"PART":if(this.username===e.prefix.split("!")[0]){this.userstate[e.params[0]]&&delete this.userstate[e.params[0]];var b=this.channels.indexOf(e.params[0]);-1!==b&&this.channels.splice(b,1),this.log.info("Left "+e.params[0]),this.emit("_promisePart",null)}this.emit("part",e.params[0],e.prefix.split("!")[0]);break;case"WHISPER":this.log.info("[WHISPER] <"+e.prefix.split("!")[0]+">: "+e.params[1]),e.tags.hasOwnProperty("username")||(e.tags.username=e.prefix.split("!")[0]),e.tags["message-type"]="whisper",this.emit("whisper",e.tags,e.params[1]),this.emit("message",null,e.tags,e.params[1],!1);break;case"PRIVMSG":if(e.tags.username=e.prefix.split("!")[0],"twitchnotify"===e.tags.username){if(e.params[1].includes("subscribed to"));else if(e.params[1].includes("just subscribed"))this.emit("subscription",e.params[0],e.params[1].split(" ")[0]);else if(e.params[1].includes("subscribed")&&e.params[1].includes("in a row")){var d=e.params[1].split(" "),w=d[d.length-5];this.emit("subanniversary",e.params[0],d[0],w)}}else"jtv"===e.tags.username?e.params[1].includes("is now hosting you for")?this.emit("hosted",e.params[0],p.normalizeUsername(e.params[1].split(" ")[0]),e.params[1].split(" ")[6]):e.params[1].includes("is now hosting you")&&this.emit("hosted",e.params[0],p.normalizeUsername(e.params[1].split(" ")[0]),0):e.params[1].match(/^\u0001ACTION ([^\u0001]+)\u0001$/)?(e.tags["message-type"]="action",this.log.info("["+e.params[0]+"] *<"+e.tags.username+">: "+e.params[1].match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1]),this.emit("action",e.params[0],e.tags,e.params[1].match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1],!1),this.emit("message",e.params[0],e.tags,e.params[1].match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1],!1)):(e.tags["message-type"]="chat",this.log.info("["+e.params[0]+"] <"+e.tags.username+">: "+e.params[1]),this.emit("chat",e.params[0],e.tags,e.params[1],!1),this.emit("message",e.params[0],e.tags,e.params[1],!1));break;default:this.log.warn("Could not parse message:\n"+JSON.stringify(e,null,4))}}},g.prototype.connect=function(){var e=this;return new Promise(function(t,n){if(e.reconnect="undefined"==typeof e.opts.connection.reconnect?!1:e.opts.connection.reconnect,e.server="undefined"==typeof e.opts.connection.server?"RANDOM":e.opts.connection.server,e.port="undefined"==typeof e.opts.connection.port?80:e.opts.connection.port,e.secure="undefined"==typeof e.opts.connection.secure?!1:e.opts.connection.secure,e.secure&&(e.port=443),443===e.port&&(e.secure=!0),e.reconnectTimer=e.reconnectTimer+1e4,e.reconnectTimer>=6e4&&(e.reconnectTimer=6e4),"RANDOM"===e.server||"undefined"!=typeof e.opts.connection.cluster){var r="undefined"==typeof e.opts.connection.cluster?"chat":e.opts.connection.cluster;l.getRandomServer(r,e.secure,function(r){e.server=r.split(":")[0],e.port=r.split(":")[1],e._openConnection(),e.once("_promiseConnect",function(r){r?n(r):t([e.server,e.port])})})}else e._openConnection(),e.once("_promiseConnect",function(r){r?n(r):t([e.server,e.port])})})},g.prototype._openConnection=function(){var e=this,t="ws";this.secure&&(t="wss"),l.isWebSocket(t,this.server,this.port,function(t){t?(e.ws=new d("wss://"+e.server,"irc"),e.ws.onmessage=e._onMessage.bind(e),e.ws.onerror=e._onError.bind(e),e.ws.onclose=e._onClose.bind(e),e.ws.onopen=e._onOpen.bind(e)):(e.reason="Sorry, we were unable to connect to chat.",e.emit("disconnected",e.reason),e.reconnect&&!e.reconnecting?(e.reconnecting=!0,e.log.error("Could not connect to server. Trying to reconnect in "+e.reconnectTimer/1e3+" seconds.."),e.emit("reconnect"),setTimeout(function(){e.reconnecting=!1,e.connect()},e.reconnectTimer)):e.reconnecting||(e.reason="Could not connect to server.",e.log.error(e.reason)))})},g.prototype._onOpen=function(){m.isNull(this.ws)||1!==this.ws.readyState||(this.log.info("Connecting to "+this.server+" on port "+this.port+".."),this.emit("connecting",this.server,this.port),this.username="undefined"==typeof this.opts.identity.username?p.generateJustinfan():this.opts.identity.username,this.password="undefined"==typeof this.opts.identity.password?"SCHMOOPIIE":this.opts.identity.password,"SCHMOOPIIE"!==this.password&&(this.password=p.normalizePassword(this.password)),this.log.info("Sending authentication to server.."),this.emit("logon"),this.ws.send("CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership"),this.ws.send("PASS "+this.password),this.ws.send("NICK "+this.username),this.ws.send("USER "+this.username+" 8 * :"+this.username))},g.prototype._onMessage=function(e){var t=this,n=e.data.split("\r\n");n.forEach(function(e){null!==e&&t.handleMessage(c(e))})},g.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),m.isNull(this.ws)?(this.reason="Connection closed.",this.log.error(this.reason),this.emit("_promiseConnect",this.reason),this.emit("disconnected",this.reason)):(this.reason="Unable to connect.",this.log.error(this.reason),this.emit("_promiseConnect",this.reason),this.emit("disconnected",this.reason)),this.ws=null},g.prototype._onClose=function(){var e=this;this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emit("_promiseConnect",this.reason),this.emit("_promiseDisconnect",null),this.emit("disconnected",this.reason)):(this.emit("_promiseConnect",this.reason),this.emit("disconnected",this.reason),this.reconnect&&!this.reconnecting&&(this.reconnecting=!0,this.log.error("Could not connect to server. Trying to reconnect in "+this.reconnectTimer/1e3+" seconds.."),this.emit("reconnect"),setTimeout(function(){e.reconnecting=!1,e.connect()},this.reconnectTimer))),this.ws=null},g.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},g.prototype._sendCommand=function(e,t,n,r){var i=this;return new Promise(function(s,o){p.promiseDelay(e).then(function(){o("No response from Twitch.")}),m.isNull(i.ws)||2===i.ws.readyState||3===i.ws.readyState?o("Not connected to server."):(m.isNull(t)?(i.log.info("Executing command: "+n),i.ws.send(n)):(i.log.info("["+p.normalizeChannel(t)+"] Executing command: "+n),i.ws.send("PRIVMSG "+p.normalizeChannel(t)+" :"+n)),r(s,o))})},g.prototype._sendMessage=function(e,t,n,r){var i=this;return new Promise(function(e,s){if(m.isNull(i.ws)||2===i.ws.readyState||3===i.ws.readyState||i.getUsername().includes("justinfan"))s("Not connected to server.");else{if(i.userstate[p.normalizeChannel(t)]||(i.userstate[p.normalizeChannel(t)]={}),n.length>=500){var o=p.splitLine(n,500);n=o[0],setTimeout(function(){i._sendMessage(t,o[1])},350)}i.ws.send("PRIVMSG "+p.normalizeChannel(t)+" :"+n),n.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)?(i.userstate[p.normalizeChannel(t)]["message-type"]="action",i.log.info("["+p.normalizeChannel(t)+"] *<"+i.getUsername()+">: "+n.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1]),i.emit("action",p.normalizeChannel(t),i.userstate[p.normalizeChannel(t)],n.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1],!0),i.emit("message",p.normalizeChannel(t),i.userstate[p.normalizeChannel(t)],n.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1],!0)):(i.userstate[p.normalizeChannel(t)]["message-type"]="chat",i.log.info("["+p.normalizeChannel(t)+"] <"+i.getUsername()+">: "+n),i.emit("chat",p.normalizeChannel(t),i.userstate[p.normalizeChannel(t)],n,!0),i.emit("message",p.normalizeChannel(t),i.userstate[p.normalizeChannel(t)],n,!0)),r(e,s)}})},g.prototype.getUsername=function(){return this.username},g.prototype.getOptions=function(){return this.opts},g.prototype.getChannels=function(){return this.channels},g.prototype.isMod=function(e,t){return this.moderators[p.normalizeChannel(e)]||(this.moderators[p.normalizeChannel(e)]=[]),this.moderators[p.normalizeChannel(e)].indexOf(p.normalizeUsername(t))>=0?!0:!1},g.prototype.readyState=function(){return m.isNull(this.ws)?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},g.prototype.disconnect=function(){var e=this;return new Promise(function(t,n){m.isNull(e.ws)||3===e.ws.readyState?(e.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),n("Cannot disconnect from server. Socket is not opened or connection is already closing.")):(e.wasCloseCalled=!0,e.log.info("Disconnecting from server.."),e.ws.close(),e.once("_promiseDisconnect",function(){t([e.server,e.port])}))})},g.prototype.utils={cronjobs:function(e,t){return new s.CronJob(e,function(){t()},null,!1)},levenshtein:function(e,t,n){var r=1,i=1,s=1;if(n="undefined"==typeof n?!1:n,n||(e=e.toLowerCase(),t=t.toLowerCase()),e==t)return 0;var o=e.length,a=t.length;if(0===o)return a*r;if(0===a)return o*s;var u=!1;try{u=!"0"[0]}catch(c){u=!0}u&&(e=e.split(""),t=t.split(""));var l,f,h,p,d,m,g=new Array(a+1),v=new Array(a+1);for(f=0;a>=f;f++)g[f]=f*r;for(l=0;o>l;l++){for(v[0]=g[0]+s,f=0;a>f;f++)h=g[f]+(e[l]==t[f]?0:i),p=g[f+1]+s,h>p&&(h=p),d=v[f]+r,h>d&&(h=d),v[f+1]=h;m=g,g=v,v=m}return h=g[a]},raffle:{init:function(e){this.raffleChannels||(this.raffleChannels={}),this.raffleChannels[p.normalizeChannel(e)]||(this.raffleChannels[p.normalizeChannel(e)]=[])},enter:function(e,t){this.init(e),this.raffleChannels[p.normalizeChannel(e)].push(t.toLowerCase())},leave:function(e,t){this.init(e);var n=this.raffleChannels[p.normalizeChannel(e)].indexOf(p.normalizeUsername(t));return n>=0?(this.raffleChannels[p.normalizeChannel(e)].splice(n,1),!0):!1},pick:function(e){this.init(e);var t=this.raffleChannels[p.normalizeChannel(e)].length;return t>=1?this.raffleChannels[p.normalizeChannel(e)][Math.floor(Math.random()*t)]:null},reset:function(e){this.init(e),this.raffleChannels[p.normalizeChannel(e)]=[]},count:function(e){return this.init(e),this.raffleChannels[p.normalizeChannel(e)]?this.raffleChannels[p.normalizeChannel(e)].length:0},isParticipating:function(e,t){return this.init(e),this.raffleChannels[p.normalizeChannel(e)].indexOf(p.normalizeUsername(t))>=0?!0:!1}},symbols:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.substring(n,n+1).charCodeAt(0);(30>=r||r>=127||65533===r)&&t++}return Math.ceil(t/e.length*100)/100},uppercase:function(e){var t=e.length,n=e.match(/[A-Z]/g);return m.isNull(n)?0:n.length/t}},g.prototype.nosql={path:function(e){(void 0).database=new a(e)},insert:function(e,t){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(n,r){n((void 0).database.collection(e).insert(t))})},where:function(e,t){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(n,r){n((void 0).database.collection(e).where(t))})},get:function(e,t){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(n,r){n((void 0).database.collection(e).get(t)||null)})},list:function(e){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(t,n){t((void 0).database.collection(e).items)})},update:function(e,t,n){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(r,i){r((void 0).database.collection(e).update(t,n))})},replace:function(e,t,n){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(r,i){r((void 0).database.collection(e).replace(t,n))})},remove:function(e,t){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(n,r){n((void 0).database.collection(e).remove(t))})}},"undefined"!=typeof t&&t.exports&&(t.exports=g),"undefined"!=typeof window&&(window.irc={},window.irc.client=g)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api":2,"./commands":4,"./events":5,"./logger":6,"./server":7,"./timer":8,"./utils":9,"irc-message":40,underscore:60,util:37,ws:void 0}],4:[function(e,t,n){"use strict";var r=e("underscore"),i=e("./utils");t.exports={action:function(e,t){return e=i.normalizeChannel(e),t="ACTION "+t+"",this._sendMessage(this._getPromiseDelay(),e,t,function(n,r){n([e,t])})},ban:function(e,t){var n=this;return e=i.normalizeChannel(e),t=i.normalizeUsername(t),this._sendCommand(this._getPromiseDelay(),e,"/ban "+t,function(r,i){n.once("_promiseBan",function(n){n?i(n):r([e,t])})})},clear:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/clear",function(n,r){t.once("_promiseClear",function(t){t?r(t):n([e])})})},color:function(e,t){var n=this;return"undefined"==typeof t&&(t=e),this._sendCommand(this._getPromiseDelay(),"#jtv","/color "+t,function(e,r){n.once("_promiseColor",function(n){n?r(n):e([t])})})},commercial:function(e,t){var n=this;return e=i.normalizeChannel(e),t="undefined"==typeof t?30:t,this._sendCommand(this._getPromiseDelay(),e,"/commercial "+t,function(r,i){n.once("_promiseCommercial",function(n){n?i(n):r([e,t])})})},emoteonly:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/emoteonly",function(n,r){t.once("_promiseEmoteonly",function(t){t?r(t):n([e])})})},emoteonlyoff:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/emoteonlyoff",function(n,r){t.once("_promiseEmoteonlyoff",function(t){t?r(t):n([e])})})},host:function(e,t){var n=this;
return e=i.normalizeChannel(e),t=i.normalizeUsername(t),this._sendCommand(2e3,e,"/host "+t,function(r,i){n.once("_promiseHost",function(n,s){n?i(n):r([e,t,s])})})},join:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),null,"JOIN "+e,function(n,r){t.once("_promiseJoin",function(t){t?r(t):n([e])})})},mod:function(e,t){var n=this;return e=i.normalizeChannel(e),t=i.normalizeUsername(t),this._sendCommand(this._getPromiseDelay(),e,"/mod "+t,function(r,i){n.once("_promiseMod",function(n){n?i(n):r([e,t])})})},mods:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/mods",function(n,r){t.once("_promiseMods",function(i,s){i?r(i):(s.forEach(function(n){t.moderators[e]||(t.moderators[e]=[]),t.moderators[e].indexOf(n)<0&&t.moderators[e].push(n)}),n(s))})})},part:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),null,"PART "+e,function(n,r){t.once("_promisePart",function(t){t?r(t):n([e])})})},leave:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),null,"PART "+e,function(n,r){t.once("_promisePart",function(t){t?r(t):n([e])})})},ping:function(){var e=this;return this._sendCommand(this._getPromiseDelay(),null,"PING",function(t,n){e.latency=new Date,e.pingTimeout=setTimeout(function(){r.isNull(e.ws)||(e.wasCloseCalled=!1,e.log.error("Ping timeout."),e.ws.close(),clearInterval(e.pingLoop),clearTimeout(e.pingTimeout))},"undefined"==typeof e.opts.connection.timeout?9999:e.opts.connection.timeout),e.once("_promisePing",function(e){t([e])})})},r9kbeta:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/r9kbeta",function(n,r){t.once("_promiseR9kbeta",function(t){t?r(t):n([e])})})},r9kmode:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/r9kbeta",function(n,r){t.once("_promiseR9kbeta",function(t){t?r(t):n([e])})})},r9kbetaoff:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/r9kbetaoff",function(n,r){t.once("_promiseR9kbetaoff",function(t){t?r(t):n([e])})})},r9kmodeoff:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/r9kbetaoff",function(n,r){t.once("_promiseR9kbetaoff",function(t){t?r(t):n([e])})})},raw:function(e){return this._sendCommand(this._getPromiseDelay(),null,e,function(t,n){t([e])})},say:function(e,t){return e=i.normalizeChannel(e),t.toLowerCase().startsWith("/me ")||t.toLowerCase().startsWith("\\me ")?this.action(e,t.substr(4)):t.startsWith(".")||t.startsWith("/")||t.startsWith("\\")?this._sendCommand(this._getPromiseDelay(),e,t,function(t,n){t([e])}):this._sendMessage(this._getPromiseDelay(),e,t,function(n,r){n([e,t])})},slow:function(e,t){var n=this;return e=i.normalizeChannel(e),t="undefined"==typeof t?300:t,this._sendCommand(this._getPromiseDelay(),e,"/slow "+t,function(r,i){n.once("_promiseSlow",function(n){n?i(n):r([e,t])})})},slowmode:function(e,t){var n=this;return e=i.normalizeChannel(e),t="undefined"==typeof t?300:t,this._sendCommand(this._getPromiseDelay(),e,"/slow "+t,function(r,i){n.once("_promiseSlow",function(n){n?i(n):r([e,t])})})},slowoff:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/slowoff",function(n,r){t.once("_promiseSlowoff",function(t){t?r(t):n([e])})})},slowmodeoff:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/slowoff",function(n,r){t.once("_promiseSlowoff",function(t){t?r(t):n([e])})})},subscribers:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/subscribers",function(n,r){t.once("_promiseSubscribers",function(t){t?r(t):n([e])})})},subscribersoff:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(this._getPromiseDelay(),e,"/subscribersoff",function(n,r){t.once("_promiseSubscribersoff",function(t){t?r(t):n([e])})})},timeout:function(e,t,n){var r=this;return e=i.normalizeChannel(e),t=i.normalizeUsername(t),n="undefined"==typeof n?300:n,this._sendCommand(this._getPromiseDelay(),e,"/timeout "+t+" "+n,function(i,s){r.once("_promiseTimeout",function(r){r?s(r):i([e,t,n])})})},unban:function(e,t){var n=this;return e=i.normalizeChannel(e),t=i.normalizeUsername(t),this._sendCommand(this._getPromiseDelay(),e,"/unban "+t,function(r,i){n.once("_promiseUnban",function(n){n?i(n):r([e,t])})})},unhost:function(e){var t=this;return e=i.normalizeChannel(e),this._sendCommand(2e3,e,"/unhost",function(n,r){t.once("_promiseUnhost",function(t){t?r(t):n([e])})})},unmod:function(e,t){var n=this;return e=i.normalizeChannel(e),t=i.normalizeUsername(t),this._sendCommand(this._getPromiseDelay(),e,"/unmod "+t,function(r,i){n.once("_promiseUnmod",function(n){n?i(n):r([e,t])})})},whisper:function(e,t){return e=i.normalizeUsername(e),this._sendCommand(this._getPromiseDelay(),"#jtv","/w "+e+" "+t,function(n,r){n([e,t])})}}},{"./utils":9,underscore:60}],5:[function(e,t,n){"use strict";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){"_"!==e.charAt(0)||isNaN(e.substr(e.length-1))||(e=e.substring(0,e.length-1)),this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;if(this._events.hasOwnProperty(e)&&"_"===e.charAt(0)){var s=1,o=e;for(var a in this._events)this._events.hasOwnProperty(a)&&a.startsWith(o)&&s++;e+=s}return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&"_"===e.charAt(0)){var u=e;for(var c in this._events)this._events.hasOwnProperty(c)&&c.startsWith(u)&&(isNaN(parseInt(c.substr(c.length-1)))||(this._events[e+parseInt(c.substr(c.length-1)-1)]=this._events[c],delete this._events[c]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],6:[function(e,t,n){"use strict";function r(){}var i=e("bunyan"),s=e("underscore");r.prototype.write=function(e){var t=e.msg||e.raw;s.isObject(t)&&!s.isNull(t)&&(t=JSON.stringify(t));var n=e.time.getHours(),r=e.time.getMinutes(),o=n>=12?"pm":"am";n%=12,n=n?n:12,n=10>n?"0"+n:n,r=10>r?"0"+r:r,console.log("[%s] %s: %s",n+":"+r+o,i.nameFromLevel[e.level],t)};var o=function(e,t,n){return i.createLogger({name:e,streams:[{level:t,stream:new r,type:n}]})};n.createLogger=o},{bunyan:38,underscore:60}],7:[function(e,t,n){(function(t){"use strict";function r(e,t,n){switch(e){case"event":case"events":if(t)return n("event-ws.tmi.twitch.tv:443");n("event.tmi.twitch.tv:80");break;case"group":case"groups":if(t)return n("group-ws.tmi.twitch.tv:443");n("group.tmi.twitch.tv:80");break;case"main":if(t)return n("main-ws.tmi.twitch.tv:443");n("main.tmi.twitch.tv:80");break;default:if(t)return n("irc-ws.chat.twitch.tv:443");n("irc-ws.chat.twitch.tv:80")}}function i(e,t,n,r){try{var i=new s("wss://"+t,"irc");i.onerror=function(){return r(!1)},i.onopen=function(){return i.close(),r(!0)}}catch(o){return r(!1)}}var s=t.WebSocket||t.MozWebSocket||e("ws");n.getRandomServer=r,n.isWebSocket=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ws:void 0}],8:[function(e,t,n){"use strict";function r(e){this.queue=[],this.index=0,this.defaultDelay=e||3e3}r.prototype.add=function(e,t){this.queue.push({fn:e,delay:t})},r.prototype.run=function(e){(e||0===e)&&(this.index=e),this.next()},r.prototype.next=function i(){var e=this,t=this.index++,n=this.queue[t],i=this.queue[this.index];n&&(n.fn(),i&&setTimeout(function(){e.next()},i.delay||this.defaultDelay))},r.prototype.reset=function(){this.index=0},r.prototype.clear=function(){this.index=0,this.queue=[]},n.queue=r},{}],9:[function(e,t,n){(function(n){"use strict";var r=e("underscore.string/toNumber"),i=e("underscore.string/ltrim");t.exports={generateJustinfan:function(){return"justinfan"+Math.floor(8e4*Math.random()+1e3)},isInteger:function(e){var t=r(e,0);return!isNaN(t)},isNodeJS:function(){try{return(t.exports="object"==typeof n&&"[object process]"===Object.prototype.toString.call(n))?!0:!1}catch(e){return!1}},isURL:function(e){var t=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");return t.test(e)?!0:!1},mergeRecursive:function(e,t){for(var n in t)try{t[n].constructor==Object?e[n]=MergeRecursive(e[n],t[n]):e[n]=t[n]}catch(r){e[n]=t[n]}return e},normalizeChannel:function(e){return"#"+i(e.toLowerCase(),"#")},normalizeUsername:function(e){return i(e.toLowerCase(),"#")},normalizePassword:function(e){return"oauth:"+e.toLowerCase().replace("oauth:","")},promiseDelay:function(e){return new Promise(function(t){setTimeout(t,e)})},splitLine:function(e,t){var n=e.substring(0,t).lastIndexOf(" ");return[e.substring(0,n),e.substring(n+1)]},addWord:function(e,t){return 0!=e.length&&(e+=" "),e+=t}}}).call(this,e("_process"))},{_process:22,"underscore.string/ltrim":57,"underscore.string/toNumber":58}],10:[function(e,t,n){},{}],11:[function(e,t,n){function r(e,t){return p.isUndefined(t)?""+t:p.isNumber(t)&&!isFinite(t)?t.toString():p.isFunction(t)||p.isRegExp(t)?t.toString():t}function i(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function s(e){return i(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,r),128)}function o(e,t,n,r,i){throw new g.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function a(e,t){e||o(e,!0,t,"==",g.ok)}function u(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?l(e,t):e==t}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(p.isPrimitive(e)||p.isPrimitive(t))return e===t;var n=c(e),r=c(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),u(e,t);var i,s,o=v(e),a=v(t);if(o.length!=a.length)return!1;for(o.sort(),a.sort(),s=o.length-1;s>=0;s--)if(o[s]!=a[s])return!1;for(s=o.length-1;s>=0;s--)if(i=o[s],!u(e[i],t[i]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function h(e,t,n,r){var i;p.isString(n)&&(r=n,n=null);try{t()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&f(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!f(i,n)||!e&&i)throw i}var p=e("util/"),d=Array.prototype.slice,m=Object.prototype.hasOwnProperty,g=t.exports=a;g.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=t.name,a=r.indexOf("\n"+i);if(a>=0){var u=r.indexOf("\n",a+1);r=r.substring(u+1)}this.stack=r}}},p.inherits(g.AssertionError,Error),g.fail=o,g.ok=a,g.equal=function(e,t,n){e!=t&&o(e,t,n,"==",g.equal)},g.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",g.notEqual)},g.deepEqual=function(e,t,n){u(e,t)||o(e,t,n,"deepEqual",g.deepEqual)},g.notDeepEqual=function(e,t,n){u(e,t)&&o(e,t,n,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",g.strictEqual)},g.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",g.notStrictEqual)},g["throws"]=function(e,t,n){h.apply(this,[!0].concat(d.call(arguments)))},g.doesNotThrow=function(e,t){h.apply(this,[!1].concat(d.call(arguments)))},g.ifError=function(e){if(e)throw e};var v=Object.keys||function(e){var t=[];for(var n in e)m.call(e,n)&&t.push(n);return t}},{"util/":37}],12:[function(e,t,n){arguments[4][10][0].apply(n,arguments)},{dup:10}],13:[function(e,t,n){(function(t){"use strict";function r(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?o(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new s(e,arguments[1]):new s(e)}function o(e,t){if(e=m(e,0>t?0:0|g(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function a(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|y(t,n);return e=m(e,r),e.write(t,n),e}function u(e,t){if(s.isBuffer(t))return c(e,t);if(K(t))return l(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return f(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?p(e,t):d(e,t)}function c(e,t){var n=0|g(t.length);return e=m(e,n),t.copy(e,0,0,n),e}function l(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function f(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(e,t){return s.TYPED_ARRAY_SUPPORT?(t.byteLength,e=s._augment(new Uint8Array(t))):e=f(e,new Uint8Array(t)),e}function p(e,t){var n=0|g(t.length);e=m(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){var n,r=0;"Buffer"===t.type&&K(t.data)&&(n=t.data,r=0|g(n.length)),e=m(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function m(e,t){s.TYPED_ARRAY_SUPPORT?(e=s._augment(new Uint8Array(t)),e.__proto__=s.prototype):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=s.poolSize>>>1;return n&&(e.parent=X),e}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e,t){if(!(this instanceof v))return new v(e,t);var n=new s(e,t);return delete n.parent,n}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return R(this,t,n);case"binary":return O(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var s=t.length;if(s%2!==0)throw new Error("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;r>o;o++){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+o]=a}return o}function _(e,t,n,r){return G(Y(t,e.length-n),e,n,r)}function E(e,t,n,r){return G(J(t),e,n,r)}function S(e,t,n,r){return E(e,t,n,r)}function k(e,t,n,r){return G(H(t),e,n,r)}function C(e,t,n,r){return G(q(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var s=e[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(n>=i+a){var u,c,l,f;switch(a){case 1:128>s&&(o=s);break;case 2:u=e[i+1],128===(192&u)&&(f=(31&s)<<6|63&u,f>127&&(o=f));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&s)<<12|(63&u)<<6|63&c,f>2047&&(55296>f||f>57343)&&(o=f));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&s)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&1114112>f&&(o=f))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return A(r)}function A(e){var t=e.length;if(Z>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function L(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",s=t;n>s;s++)i+=F(e[s]);return i}function j(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function M(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function P(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);s>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);s>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function I(e,t,n,r,i,s){if(t>i||s>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function D(e,t,n,r,i){return i||I(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,i){return i||I(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(e,t,n,r,52,8),n+8}function B(e){if(e=W(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return 16>e?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,s=[],o=0;r>o;o++){if(n=e.charCodeAt(o),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;s.push(n)}else if(2048>n){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function J(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}function H(e){return $.toByteArray(B(e))}function G(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var $=e("base64-js"),V=e("ieee754"),K=e("isarray");n.Buffer=s,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50,s.poolSize=8192;var X={};s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),s.TYPED_ARRAY_SUPPORT?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=void 0,s.prototype.parent=void 0),s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);o>i&&e[i]===t[i];)++i;return i!==o&&(n=e[i],r=t[i]),r>n?-1:n>r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!K(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new s(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new s(t),i=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(r,i),i+=o.length}return r},s.byteLength=y,s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):b.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:s.compare(this,e)},s.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(s.isBuffer(e))return n(this,e,t);if("number"==typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},s.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return E(this,e,t,n);case"binary":return S(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=s._augment(this.subarray(e,t));else{var i=t-e;r=new s(i,void 0);for(var o=0;i>o;o++)r[o]=this[o+e]}return r.length&&(r.parent=this.parent||this),r},s.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||M(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},s.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||M(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||M(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),V.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),V.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),V.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),V.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||N(this,e,t,n,Math.pow(2,8*n),0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||N(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var s=0,o=1,a=0>e?1:0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=(e/o>>0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=0>e?1:0;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=(e/o>>0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||N(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;
if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&t>n&&r>t)for(i=o-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>o||!s.TYPED_ARRAY_SUPPORT)for(i=0;o>i;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=Y(e.toString()),s=i.length;for(r=t;n>r;r++)this[r]=i[r%s]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=s.prototype;s._augment=function(e){return e.constructor=s,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":14,ieee754:15,isarray:16}],14:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===o||t===f?62:t===a||t===h?63:u>t?-1:u+10>t?t-u+26+26:l+26>t?t-l:c+26>t?t-c+26:void 0}function n(e){function n(e){c[f++]=e}var r,i,o,a,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;u="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,c=new s(3*e.length/4-u),o=u>0?e.length-4:e.length;var f=0;for(r=0,i=0;o>r;r+=4,i+=3)a=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&a)):1===u&&(a=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,s,o,a=e.length%3,u="";for(i=0,o=e.length-a;o>i;i+=3)s=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=n(s);switch(a){case 1:s=e[e.length-1],u+=t(s>>2),u+=t(s<<4&63),u+="==";break;case 2:s=(e[e.length-2]<<8)+e[e.length-1],u+=t(s>>10),u+=t(s>>4&63),u+=t(s<<2&63),u+="="}return u}var s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],15:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,s=p&(1<<-l)-1,p>>=-l,l+=a;l>0;s=256*s+e[t+f],f+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,r),s-=c}return(p?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,a,u,c=8*s-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(t*u-1)*Math.pow(2,i),o+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&a,p+=d,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[n+p]=255&o,p+=d,o/=256,c-=8);e[n+p-d]|=128*m}},{}],16:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],17:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),u=1;r>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),u=1;r>u;u++)s[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],18:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],19:[function(e,t,n){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],20:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],21:[function(e,t,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}],22:[function(e,t,n){function r(){h&&l&&(h=!1,l.length?f=l.concat(f):p=-1,f.length&&i())}function i(){if(!h){var e=a(r);h=!0;for(var t=f.length;t;){for(l=f,f=[];++p<t;)l&&l[p].run();p=-1,t=f.length}l=null,h=!1,u(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var a,u,c=t.exports={};!function(){try{a=setTimeout}catch(e){a=function(){throw new Error("setTimeout is not defined")}}try{u=clearTimeout}catch(e){u=function(){throw new Error("clearTimeout is not defined")}}}();var l,f=[],h=!1,p=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new s(e,t)),1!==f.length||h||a(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],23:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":24}],24:[function(e,t,n){(function(n){function r(e){return this instanceof r?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function s(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}t.exports=r;var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},a=e("core-util-is");a.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(r,u),s(o(c.prototype),function(e){r.prototype[e]||(r.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":26,"./_stream_writable":28,_process:22,"core-util-is":29,inherits:18}],25:[function(e,t,n){function r(e){return this instanceof r?void i.call(this,e):new r(e)}t.exports=r;var i=e("./_stream_transform"),s=e("core-util-is");s.inherits=e("inherits"),s.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":27,"core-util-is":29,inherits:18}],26:[function(e,t,n){(function(n){function r(t,n){var r=e("./_stream_duplex");t=t||{};var i=t.highWaterMark,s=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:s,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(A||(A=e("string_decoder/").StringDecoder),this.decoder=new A(t.encoding),this.encoding=t.encoding)}function i(t){e("./_stream_duplex");return this instanceof i?(this._readableState=new r(t,this),this.readable=!0,void x.call(this)):new i(t)}function s(e,t,n,r,i){var s=c(t,n);if(s)e.emit("error",s);else if(T.isNullOrUndefined(n))t.reading=!1,t.ended||l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&f(e)),p(e,t);else i||(t.reading=!1);return o(t)}function o(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=O)e=O;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||T.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var n=null;return T.isBuffer(t)||T.isString(t)||T.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,f(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(R("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(function(){h(e)}):h(e))}function h(e){R("emit readable"),e.emit("readable"),y(e)}function p(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){d(e,t)}))}function d(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(R("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&C.listenerCount(e,"data")&&(t.flowing=!0,y(e))}}function g(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(function(){v(e,t)}))}function v(e,t){t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;if(R("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function b(e,t){var n,r=t.buffer,i=t.length,s=!!t.decoder,o=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(o)n=r.shift();else if(!e||e>=i)n=s?r.join(""):k.concat(r,i),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=s?"":new k(e);for(var u=0,c=0,l=r.length;l>c&&e>u;c++){var a=r[0],f=Math.min(e-u,a.length);s?n+=a.slice(0,f):a.copy(n,u,0,f),f<a.length?r[0]=a.slice(f):r.shift(),u+=f}}return n}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function _(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function E(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var S=e("isarray"),k=e("buffer").Buffer;i.ReadableState=r;var C=e("events").EventEmitter;C.listenerCount||(C.listenerCount=function(e,t){return e.listeners(t).length});var x=e("stream"),T=e("core-util-is");T.inherits=e("inherits");var A,R=e("util");R=R&&R.debuglog?R.debuglog("stream"):function(){},T.inherits(i,x),i.prototype.push=function(e,t){var n=this._readableState;return T.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new k(e,t),t="")),s(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,"",!0)},i.prototype.setEncoding=function(t){return A||(A=e("string_decoder/").StringDecoder),this._readableState.decoder=new A(t),this._readableState.encoding=t,this};var O=8388608;i.prototype.read=function(e){R("read",e);var t=this._readableState,n=e;if((!T.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return R("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):f(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var r=t.needReadable;R("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,R("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,R("reading or ended",r)),r&&(R("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=u(n,t));var i;return i=e>0?b(e,t):null,T.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&w(this),T.isNull(i)||this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){R("onunpipe"),e===f&&s()}function i(){R("onend"),e.end()}function s(){R("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",a),e.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",s),f.removeListener("data",o),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function o(t){R("ondata");var n=e.write(t);!1===n&&(R("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function a(t){R("onerror",t),l(),e.removeListener("error",a),0===C.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),l()}function c(){R("onfinish"),e.removeListener("close",u),l()}function l(){R("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,R("pipe count=%d opts=%j",h.pipesCount,t);var p=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,d=p?i:s;h.endEmitted?n.nextTick(d):f.once("end",d),e.on("unpipe",r);var g=m(f);return e.on("drain",g),f.on("data",o),e._events&&e._events.error?S(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",c),e.emit("pipe",f),h.flowing||(R("pipe resume"),f.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=x.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&f(this,i);else{var s=this;n.nextTick(function(){R("readable nexttick read 0"),s.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!0,e.reading||(R("resume read 0"),this.read(0)),g(this,e)),this},i.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(R("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(R("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var s=r.push(i);s||(n=!0,e.pause())}});for(var i in e)T.isFunction(e[i])&&T.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return _(s,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){R("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=b}).call(this,e("_process"))},{"./_stream_duplex":24,_process:22,buffer:13,"core-util-is":29,events:17,inherits:18,isarray:20,stream:34,"string_decoder/":35,util:12}],27:[function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,u.isNullOrUndefined(n)||e.push(n),i&&i(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);a.call(this,e),this._transformState=new r(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=s;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(s,a),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;u.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":24,"core-util-is":29,inherits:18}],28:[function(e,t,n){(function(n){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(t,n){var r=e("./_stream_duplex");t=t||{};var i=t.highWaterMark,s=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:s,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function s(t){var n=e("./_stream_duplex");return this instanceof s||this instanceof n?(this._writableState=new i(t,this),this.writable=!0,void S.call(this)):new s(t)}function o(e,t,r){var i=new Error("write after end");e.emit("error",i),n.nextTick(function(){r(i)})}function a(e,t,r,i){var s=!0;if(!(E.isBuffer(r)||E.isString(r)||E.isNullOrUndefined(r)||t.objectMode)){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),n.nextTick(function(){i(o)}),s=!1}return s}function u(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&E.isString(t)&&(t=new _(t,n)),t}function c(e,t,n,i,s){n=u(t,n,i),E.isBuffer(n)&&(i="buffer");var o=t.objectMode?1:n.length;t.length+=o;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new r(n,i,s)):l(e,t,!1,o,n,i,s),a}function l(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function f(e,t,r,i,s){r?n.nextTick(function(){t.pendingcb--,s(i)}):(t.pendingcb--,s(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if(h(r),t)f(e,r,i,t,s);else{var o=v(e,r);o||r.corked||r.bufferProcessing||!r.buffer.length||g(e,r),i?n.nextTick(function(){d(e,r,o,s)}):d(e,r,o,s)}}function d(e,t,n,r){n||m(e,t),t.pendingcb--,r(),b(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,l(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],s=i.chunk,o=i.encoding,a=i.callback,u=t.objectMode?1:s.length;if(l(e,t,!1,u,s,o,a),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function v(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var n=v(e,t);return n&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),n}function w(e,t,r){t.ending=!0,b(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0}t.exports=s;var _=e("buffer").Buffer;s.WritableState=i;var E=e("core-util-is");E.inherits=e("inherits");var S=e("stream");E.inherits(s,S),s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return E.isFunction(t)&&(n=t,t=null),E.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),E.isFunction(n)||(n=function(){}),r.ended?o(this,r,n):a(this,r,e,n)&&(r.pendingcb++,i=c(this,r,e,t,n)),i},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||g(this,e))},s.prototype._write=function(e,t,n){n(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var r=this._writableState;E.isFunction(e)?(n=e,e=null,t=null):E.isFunction(t)&&(n=t,t=null),E.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":24,_process:22,buffer:13,"core-util-is":29,inherits:18,stream:34}],29:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function s(e){return null==e}function o(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===g(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===g(e)}function p(e){return"[object Error]"===g(e)||e instanceof Error}function d(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=s,n.isNumber=o,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=f,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=m,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":19}],30:[function(e,t,n){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":25}],31:[function(e,t,n){(function(r){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=e("stream"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),r.browser||"disable"!==r.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":24,"./lib/_stream_passthrough.js":25,"./lib/_stream_readable.js":26,"./lib/_stream_transform.js":27,"./lib/_stream_writable.js":28,_process:22,stream:34}],32:[function(e,t,n){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":27}],33:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":28}],34:[function(e,t,n){function r(){i.call(this)}t.exports=r;var i=e("events").EventEmitter,s=e("inherits");s(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function s(){l||(l=!0,e.end())}function o(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",s),c.removeListener("close",o),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(c.on("end",s),c.on("close",o));var l=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},{events:17,inherits:18,"readable-stream/duplex.js":23,"readable-stream/passthrough.js":30,"readable-stream/readable.js":31,"readable-stream/transform.js":32,"readable-stream/writable.js":33}],35:[function(e,t,n){function r(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;
if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:13}],36:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],37:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),u(r,e,r.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&x(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=u(e,i,r)),i}var s=c(e,t);if(s)return s;var o=Object.keys(t),m=a(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),C(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(t);if(0===o.length){if(x(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return l(t)}var v="",y=!1,w=["{","}"];if(d(t)&&(y=!0,w=["[","]"]),x(t)){var _=t.name?": "+t.name:"";v=" [Function"+_+"]"}if(E(t)&&(v=" "+RegExp.prototype.toString.call(t)),k(t)&&(v=" "+Date.prototype.toUTCString.call(t)),C(t)&&(v=" "+l(t)),0===o.length&&(!y||0==t.length))return w[0]+v+w[1];if(0>r)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=y?f(e,t,r,m,o):o.map(function(n){return h(e,t,r,m,n,y)}),e.seen.pop(),p(S,v,w)}function c(e,t){if(_(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var s=[],o=0,a=t.length;a>o;++o)L(t,String(o))?s.push(h(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(h(e,t,n,r,i,!0))}),s}function h(e,t,n,r,i,s){var o,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),L(r,i)||(o="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(n)?u(e,c.value,null):u(e,c.value,n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),_(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function p(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function E(e){return S(e)&&"[object RegExp]"===A(e)}function S(e){return"object"==typeof e&&null!==e}function k(e){return S(e)&&"[object Date]"===A(e)}function C(e){return S(e)&&("[object Error]"===A(e)||e instanceof Error)}function x(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function A(e){return Object.prototype.toString.call(e)}function R(e){return 10>e?"0"+e.toString(10):e.toString(10)}function O(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var j=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(e).replace(j,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),a=r[n];s>n;a=r[++n])o+=g(a)||!S(a)?" "+a:" "+i(a);return o},n.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var M,N={};n.debuglog=function(e){if(_(M)&&(M=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!N[e])if(new RegExp("\\b"+e+"\\b","i").test(M)){var r=t.pid;N[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else N[e]=function(){};return N[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=v,n.isNumber=y,n.isString=b,n.isSymbol=w,n.isUndefined=_,n.isRegExp=E,n.isObject=S,n.isDate=k,n.isError=C,n.isFunction=x,n.isPrimitive=T,n.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",O(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":36,_process:22,inherits:18}],38:[function(e,t,n){(function(n,r){function i(e){if(null==e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var t={};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}return e}function s(){if(void 0!==this){var e={},t=Error.stackTraceLimit,n=Error.prepareStackTrace;return Error.stackTraceLimit=3,Error.captureStackTrace(this,s),Error.prepareStackTrace=function(t,n){var r=n[2];L&&(r=L.wrapCallSite(r)),e.file=r.getFileName(),e.line=r.getLineNumber();var i=r.getFunctionName();i&&(e.func=i)},this.stack,Error.stackTraceLimit=t,Error.prepareStackTrace=n,e}}function o(e,t){t||(t="    ");var n=e.split(/\r?\n/g);return t+n.join("\n"+t)}function a(e,t){if(x.ok(e),t){if(U[t])return;U[t]=!0}r.stderr.write(e+"\n")}function u(e){return U[e]}function c(){}function l(e){var t,n=typeof e;if("string"===n){if(t=Y[e.toLowerCase()],!t)throw new Error(M('unknown level name: "%s"',e))}else{if("number"!==n)throw new TypeError(M("cannot resolve level: invalid arg (%s):",n,e));if(0>e||Math.floor(e)!==e)throw new TypeError(M("level is not a positive integer: %s",e));t=e}return t}function f(e){return e instanceof A.Writable?!0:"function"==typeof e.write}function h(e,t,n){if(w("Logger start:",e),!(this instanceof h))return new h(e,t);var s;if(void 0!==t&&(s=e,e=t,!(s instanceof h)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(s){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");if(T.call(this),s&&n){this._isSimpleChild=!0,this._level=s._level,this.streams=s.streams,this.serializers=s.serializers,this.src=s.src;for(var o=this.fields={},a=Object.keys(s.fields),u=0;u<a.length;u++){var l=a[u];o[l]=s.fields[l]}for(var f=Object.keys(e),u=0;u<f.length;u++){var l=f[u];o[l]=e[l]}}else{var p=this;if(s){this._level=s._level,this.streams=[];for(var u=0;u<s.streams.length;u++){var d=i(s.streams[u]);d.closeOnExit=!1,this.streams.push(d)}this.serializers=i(s.serializers),this.src=s.src,this.fields=i(s.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};if(!q&&S){q=S.createDTraceProvider("bunyan");for(var m in Y){var g;H[Y[m]]=g=q.addProbe("log-"+m,"char *"),g.dtp=q}q.enable()}e.stream?p.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(t){p.addStream(t,e.level)}):s&&e.level?this.level(e.level):s||("browser"===v?p.addStream({type:"raw",stream:new c,closeOnExit:!1,level:e.level}):p.addStream({type:"stream",stream:r.stdout,closeOnExit:!1,level:e.level})),e.serializers&&p.addSerializers(e.serializers),e.src&&(this.src=!0),w("Logger: ",p);var o=i(e);delete o.stream,delete o.level,delete o.streams,delete o.serializers,delete o.src,this.serializers&&this._applySerializers(o),o.hostname||p.fields.hostname||(o.hostname=_.hostname()),o.pid||(o.pid=r.pid),Object.keys(o).forEach(function(e){p.fields[e]=o[e]})}}function p(e){return function(){function t(t){var a;t[0]instanceof Error?(o={err:r.serializers&&r.serializers.err?r.serializers.err(t[0]):h.stdSerializers.err(t[0])},a={err:!0},c=1===t.length?[o.err.message]:Array.prototype.slice.call(t,1)):"object"!=typeof t[0]&&null!==t[0]||Array.isArray(t[0])?(o=null,c=Array.prototype.slice.call(t)):n.isBuffer(t[0])?(o=null,c=Array.prototype.slice.call(t),c[0]=C.inspect(c[0])):(o=t[0],c=Array.prototype.slice.call(t,1));var u=i(r.fields),l=(u.level=e,o?i(o):null);return l&&(r.serializers&&r._applySerializers(l,a),Object.keys(l).forEach(function(e){u[e]=l[e]})),u.msg=M.apply(r,c),u.time||(u.time=new Date),r.src&&!u.src&&(u.src=s()),u.v=b,u}var r=this,o=null,c=arguments,l=null,f=null;if(this._emit){if(0===arguments.length)return this._level<=e;this._level>e||(f=t(c),l=this._emit(f)),H&&H[e].fire(function(){return[l||f&&r._emit(f,!0)||r._emit(t(c),!0)]})}else{var p="unbound";if(!u[p]){var d=s();a(M("bunyan usage error: %s:%s: attempt to log with an unbound log method: `this` is: %s",d.file,d.line,C.inspect(this)),p)}}}}function d(e){var t=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var n=e.cause();n&&(t+="\nCaused by: "+d(n))}return t}function m(){var e=[];return function(t,n){return n&&"object"==typeof n?-1!==e.indexOf(n)?"[Circular]":(e.push(n),n):n}}function g(e){this.limit=e&&e.limit?e.limit:100,this.writable=!0,this.records=[],T.call(this)}var v,y="1.7.1",b=0,w=function(e){var t=["XXX: "+e].concat(Array.prototype.slice.call(arguments,1));console.error.apply(this,t)},w=function(){};if("undefined"!=typeof r&&r.versions&&(r.versions.nw?v="nw":r.versions.node&&(v="node")),v||"undefined"==typeof window||window.window!==window||(v="browser"),!v)throw new Error("unknown runtime environment");var _,E,S;if("browser"===v)_={hostname:function(){return window.location.host}},E={},S=null;else{_=e("os"),E=e("fs");try{S=e("dtrace-provider")}catch(k){S=null}}var C=e("util"),x=e("assert"),T=e("events").EventEmitter,A=e("stream");try{var R=e("safe-json-stringify")}catch(k){R=null}r.env.BUNYAN_TEST_NO_SAFE_JSON_STRINGIFY&&(R=null);try{var O=e("mv")}catch(k){O=null}try{var L=e("source-map-support")}catch(j){L=null}var M=C.format;if(!M){var N=C.inspect,P=/%[sdj%]/g;M=function(e){if("string"!=typeof e){for(var t=[],n=0;n<arguments.length;n++)t.push(N(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(e).replace(P,function(e){if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":return JSON.stringify(r[n++],m());case"%%":return"%";default:return e}}),o=r[n];i>n;o=r[++n])s+=null===o||"object"!=typeof o?" "+o:" "+N(o);return s}}var U={};c.prototype.write=function(e){e.level<z?console.log(e):e.level<B?console.info(e):e.level<W?console.warn(e):console.error(e)};var I=10,D=20,z=30,B=40,W=50,F=60,Y={trace:I,debug:D,info:z,warn:B,error:W,fatal:F},J={};Object.keys(Y).forEach(function(e){J[Y[e]]=e});var q=void 0,H=S&&{};C.inherits(h,T),h.prototype.addStream=function(e,t){var n=this;switch((null===t||void 0===t)&&(t=z),e=i(e),e.type||(e.stream?e.type="stream":e.path&&(e.type="file")),e.raw="raw"===e.type,void 0!==e.level?e.level=l(e.level):e.level=l(t),e.level<n._level&&(n._level=e.level),e.type){case"stream":x.ok(f(e.stream),'"stream" stream is not writable: '+C.inspect(e.stream)),e.closeOnExit||(e.closeOnExit=!1);break;case"file":void 0===e.reemitErrorEvents&&(e.reemitErrorEvents=!0),e.stream?e.closeOnExit||(e.closeOnExit=!1):(e.stream=E.createWriteStream(e.path,{flags:"a",encoding:"utf8"}),e.closeOnExit||(e.closeOnExit=!0));break;case"rotating-file":x.ok(!e.stream,'"rotating-file" stream should not give a "stream"'),x.ok(e.path),x.ok(O,'"rotating-file" stream type is not supported: missing "mv" module'),e.stream=new G(e),e.closeOnExit||(e.closeOnExit=!0);break;case"raw":e.closeOnExit||(e.closeOnExit=!1);break;default:throw new TypeError('unknown stream type "'+e.type+'"')}e.reemitErrorEvents&&"function"==typeof e.stream.on&&e.stream.on("error",function(t){n.emit("error",t,e)}),n.streams.push(e),delete n.haveNonRawStreams},h.prototype.addSerializers=function(e){var t=this;t.serializers||(t.serializers={}),Object.keys(e).forEach(function(n){var r=e[n];if("function"!=typeof r)throw new TypeError(M('invalid serializer for "%s" field: must be a function',n));t.serializers[n]=r})},h.prototype.child=function(e,t){return new this.constructor(this,e||{},t)},h.prototype.reopenFileStreams=function(){var e=this;e.streams.forEach(function(t){"file"===t.type&&(t.stream&&(t.stream.end(),t.stream.destroySoon(),delete t.stream),t.stream=E.createWriteStream(t.path,{flags:"a",encoding:"utf8"}),t.stream.on("error",function(n){e.emit("error",n,t)}))})},h.prototype.level=function(e){if(void 0===e)return this._level;for(var t=l(e),n=this.streams.length,r=0;n>r;r++)this.streams[r].level=t;this._level=t},h.prototype.levels=function(e,t){if(void 0===e)return x.equal(t,void 0),this.streams.map(function(e){return e.level});var n;if("number"==typeof e){if(n=this.streams[e],void 0===n)throw new Error("invalid stream index: "+e)}else{for(var r=this.streams.length,i=0;r>i;i++){var s=this.streams[i];if(s.name===e){n=s;break}}if(!n)throw new Error(M('no stream with name "%s"',e))}if(void 0===t)return n.level;var o=l(t);n.level=o,o<this._level&&(this._level=o)},h.prototype._applySerializers=function(e,t){var n=this;w("_applySerializers: excludeFields",t),Object.keys(this.serializers).forEach(function(r){if(!(void 0===e[r]||t&&t[r])){w('_applySerializers; apply to "%s" key',r);try{e[r]=n.serializers[r](e[r])}catch(i){a(M('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',r,i.stack||i)),e[r]=M('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',r)}}})},h.prototype._emit=function(e,t){var n;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,n=0;n<this.streams.length;n++)if(!this.streams[n].raw){this.haveNonRawStreams=!0;break}var r;if(t||this.haveNonRawStreams)try{r=JSON.stringify(e,m())+"\n"}catch(i){if(R)r=R(e)+"\n";else{var s=i.stack.split(/\n/g,2).join("\n");a('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+o(M("%s\n%s",C.inspect(e),i.stack)),s),r=M("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",i.message)}}if(t)return r;var u=e.level;for(n=0;n<this.streams.length;n++){var c=this.streams[n];c.level<=u&&(w('writing log rec "%s" to "%s" stream (%d <= %d): %j',e.msg,c.type,c.level,u,e),c.stream.write(c.raw?e:r))}return r},h.prototype.trace=p(I),h.prototype.debug=p(D),h.prototype.info=p(z),h.prototype.warn=p(B),h.prototype.error=p(W),h.prototype.fatal=p(F),h.stdSerializers={},h.stdSerializers.req=function $($){return $&&$.connection?{method:$.method,url:$.url,headers:$.headers,remoteAddress:$.connection.remoteAddress,remotePort:$.connection.remotePort}:$},h.stdSerializers.res=function V(V){return V&&V.statusCode?{statusCode:V.statusCode,header:V._header}:V};var G=(h.stdSerializers.err=function K(K){if(!K||!K.stack)return K;var e={message:K.message,name:K.name,stack:d(K),code:K.code,signal:K.signal};return e},null);O&&(G=function(e){if(this.path=e.path,this.stream=E.createWriteStream(this.path,{flags:"a",encoding:"utf8"}),this.count=null==e.count?10:e.count,x.equal(typeof this.count,"number",M('rotating-file stream "count" is not a number: %j (%s) in %j',this.count,typeof this.count,this)),x.ok(this.count>=0,M('rotating-file stream "count" is not >= 0: %j in %j',this.count,this)),e.period){var t={hourly:"1h",daily:"1d",weekly:"1w",monthly:"1m",yearly:"1y"}[e.period]||e.period,n=/^([1-9][0-9]*)([hdwmy]|ms)$/.exec(t);if(!n)throw new Error(M('invalid period: "%s"',e.period));this.periodNum=Number(n[1]),this.periodScope=n[2]}else this.periodNum=1,this.periodScope="d";this.rotQueue=[],this.rotating=!1,this._setupNextRot()},C.inherits(G,T),G.prototype._setupNextRot=function(){this.rotAt=this._nextRotTime(),this._setRotationTimer()},G.prototype._setRotationTimer=function(){var e=this,t=this.rotAt-Date.now(),n=2147483647;t>n&&(t=n),this.timeout=setTimeout(function(){e.rotate()},t),"function"==typeof this.timeout.unref&&this.timeout.unref()},G.prototype._nextRotTime=function(e){var t=!1;t&&console.log("-- _nextRotTime: %s%s",this.periodNum,this.periodScope);var n=new Date;t&&console.log("  now local: %s",n),t&&console.log("    now utc: %s",n.toISOString());var r;switch(this.periodScope){case"ms":r=this.rotAt?this.rotAt+this.periodNum:Date.now()+this.periodNum;break;case"h":r=this.rotAt?this.rotAt+60*this.periodNum*60*1e3:Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()+1);break;case"d":r=this.rotAt?this.rotAt+24*this.periodNum*60*60*1e3:Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()+1);break;case"w":r=this.rotAt?this.rotAt+7*this.periodNum*24*60*60*1e3:Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()+(7-n.getUTCDay()));break;case"m":r=this.rotAt?Date.UTC(n.getUTCFullYear(),n.getUTCMonth()+this.periodNum,1):Date.UTC(n.getUTCFullYear(),n.getUTCMonth()+1,1);break;case"y":r=this.rotAt?Date.UTC(n.getUTCFullYear()+this.periodNum,0,1):Date.UTC(n.getUTCFullYear()+1,0,1);break;default:x.fail(M('invalid period scope: "%s"',this.periodScope))}if(t){console.log("  **rotAt**: %s (utc: %s)",r,new Date(r).toUTCString());var i=Date.now();console.log("        now: %s (%sms == %smin == %sh to go)",i,r-i,(r-i)/1e3/60,(r-i)/1e3/60/60)}return r},G.prototype.rotate=function(){function e(){var e=i.path+"."+String(o-1);0===o&&(e=i.path),o-=1,s&&console.log("rm %s",e),E.unlink(e,function(e){t()})}function t(){if(0===i.count||0>o)return n();var e=i.path,a=i.path+"."+String(o);o>0&&(e+="."+String(o-1)),o-=1,E.exists(e,function(o){o?(s&&console.log("[pid %s] mv %s %s",r.pid,e,a),O(e,a,function(e){e?(i.emit("error",e),n()):t()})):t()})}function n(){s&&console.log("[pid %s] open %s",r.pid,i.path),i.stream=E.createWriteStream(i.path,{flags:"a",encoding:"utf8"});for(var e=i.rotQueue,t=e.length,n=0;t>n;n++)i.stream.write(e[n]);i.rotQueue=[],i.rotating=!1,i.emit("drain"),i._setupNextRot()}var i=this,s=!1;if(i.rotAt&&i.rotAt>Date.now())return i._setRotationTimer();if(s&&console.log("-- [%s, pid=%s] rotating %s",new Date,r.pid,i.path),i.rotating)throw new TypeError("cannot start a rotation when already rotating");i.rotating=!0,i.stream.end();var o=this.count;e()},G.prototype.write=function(e){return this.rotating?(this.rotQueue.push(e),!1):this.stream.write(e)},G.prototype.end=function(e){this.stream.end()},G.prototype.destroy=function(e){this.stream.destroy()},G.prototype.destroySoon=function(e){this.stream.destroySoon()}),C.inherits(g,T),g.prototype.write=function(e){if(!this.writable)throw new Error("RingBuffer has been ended already");return this.records.push(e),this.records.length>this.limit&&this.records.shift(),!0},g.prototype.end=function(){arguments.length>0&&this.write.apply(this,Array.prototype.slice.call(arguments)),this.writable=!1},g.prototype.destroy=function(){this.writable=!1,this.emit("close")},g.prototype.destroySoon=function(){this.destroy()},t.exports=h,t.exports.TRACE=I,t.exports.DEBUG=D,t.exports.INFO=z,t.exports.WARN=B,t.exports.ERROR=W,t.exports.FATAL=F,t.exports.resolveLevel=l,t.exports.levelFromName=Y,t.exports.nameFromLevel=J,t.exports.VERSION=y,t.exports.LOG_VERSION=b,t.exports.createLogger=function(e){return new h(e)},t.exports.RingBuffer=g,t.exports.RotatingFileStream=G,t.exports.safeCycles=m}).call(this,{isBuffer:e("../../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")},e("_process"))},{"../../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":19,_process:22,assert:11,events:17,fs:10,os:21,"safe-json-stringify":39,stream:34,util:37}],39:[function(e,t,n){function r(e){return"[Throws: "+(e?e.message:"?")+"]"}function i(e,t){if(o.call(e,t))try{return e[t]}catch(n){return r(n)}return e[t]}function s(e){function t(e){if(null===e||"object"!=typeof e)return e;if(-1!==n.indexOf(e))return"[Circular]";if(n.push(e),"function"==typeof e.toJSON)try{return t(e.toJSON())}catch(s){return r(s)}return Array.isArray(e)?e.map(t):Object.keys(e).reduce(function(n,r){return n[r]=t(i(e,r)),n},{})}var n=[];return t(e)}var o=Object.prototype.hasOwnProperty;t.exports=function(e){return JSON.stringify(s(e))},t.exports.ensureProperties=s},{}],40:[function(e,t,n){var r=e("through2"),i=e("irc-prefix-parser"),s=e("iso8601-convert"),o=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,r=0;if(64===e.charCodeAt(0)){var r=e.indexOf(" ");if(-1===r)return null;for(var i=e.slice(1,r).split(";"),s=0;s<i.length;s++){var o=i[s],a=o.split("=");t.tags[a[0]]=a[1]||!0}n=r+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(r=e.indexOf(" ",n),-1===r)return null;for(t.prefix=e.slice(n+1,r),n=r+1;32===e.charCodeAt(n);)n++}if(r=e.indexOf(" ",n),-1===r)return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,r),n=r+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(r=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===r){if(-1===r){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,r)),n=r+1;32===e.charCodeAt(n);)n++}return t},a=function(e){var e=e||{},t=e.convertTimestamps||!1,n=e.parsePrefix||!1,a="",u=r.obj(function(e,r,u){a+=e.toString(),messages=a.split(/\r\n/),a=messages.pop();for(var c=0;c<messages.length;c++){var l=messages[c],f=o(l),h=f.tags.time;if(h&&t){var p=s.toDate(h);f.tags.time=p?p:new Date(NaN)}n&&(f.prefix=i(f.prefix)),null===f&&this.emit("error",new Error("Invalid IRC message")),this.push(f)}u()});return u};t.exports={parse:o,createStream:a}},{"irc-prefix-parser":41,"iso8601-convert":42,through2:53}],41:[function(e,t,n){t.exports=function(e){if(!e||0===e.length)return null;var t=e.indexOf(".")+1,n=e.indexOf("!")+1,r=e.indexOf("@",n)+1;if(1===n||1===r)return null;var i={};return i.raw=e,i.isServer=!1,i.nick=null,i.user=null,i.host=null,n>0?(i.nick=e.slice(0,n-1),r>0?(i.user=e.slice(n,r-1),i.host=e.slice(r)):i.user=e.slice(n)):r>0?(i.nick=e.slice(0,r-1),i.host=e.slice(r)):t>0?(i.host=e,i.isServer=!0):i.nick=e,i}},{}],42:[function(e,t,n){function r(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}function i(e){var t="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",n=e.match(new RegExp(t));if(null===n)return null;var r=0,i=new Date(n[1],0,1);n[3]&&i.setMonth(n[3]-1),n[5]&&i.setDate(n[5]),n[7]&&i.setHours(n[7]),n[8]&&i.setMinutes(n[8]),n[10]&&i.setSeconds(n[10]),n[12]&&i.setMilliseconds(1e3*("0."+n[12])),n[14]&&(r=60*n[16]+parseInt(n[17],10),r*="-"===n[15]?1:-1),r-=i.getTimezoneOffset();var s=i.getTime()+60*r*1e3;return new Date(s)}var s=function(e){var t=e.getUTCFullYear(),n=r(e.getUTCMonth()+1,2),i=r(e.getUTCDate(),2),s=r(e.getUTCHours(),2),o=r(e.getUTCMinutes(),2),a=r(e.getUTCSeconds(),2);return t+"-"+n+"-"+i+"T"+s+":"+o+":"+a+"Z"};n.toDate=i,n.fromDate=s},{}],43:[function(e,t,n){(function(n){function r(e){return this instanceof r?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function s(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}t.exports=r;var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},a=e("core-util-is");a.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(r,u),s(o(c.prototype),function(e){r.prototype[e]||(r.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":44,"./_stream_writable":46,_process:22,"core-util-is":47,inherits:48}],44:[function(e,t,n){(function(n){function r(t,n){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(A||(A=e("string_decoder/").StringDecoder),this.decoder=new A(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void x.call(this)):new i(e)}function s(e,t,n,r,i){var s=c(t,n);if(s)e.emit("error",s);else if(null===n||void 0===n)t.reading=!1,t.ended||l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&f(e),p(e,t);else i||(t.reading=!1);return o(t)}function o(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=R)e=R;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var n=null;return k.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?f(e):w(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?n.nextTick(function(){h(e)}):h(e))}function h(e){e.emit("readable")}function p(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){d(e,t)}))}function d(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&g(e)}}function g(e){function t(e,t,i){var s=e.write(n);!1===s&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):_(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(C.listenerCount(e,"data")>0&&y(e))):void(r.ranOut=!0)}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function y(e,t){var r=e._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var i=t||!1,s=!1;e.readable=!0,e.pipe=x.prototype.pipe,e.on=e.addListener=x.prototype.on,e.on("readable",function(){s=!0;for(var t;!i&&null!==(t=e.read());)e.emit("data",t);null===t&&(s=!1,e._readableState.needReadable=!0)}),e.pause=function(){i=!0,this.emit("pause")},e.resume=function(){i=!1,s?n.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function b(e,t){var n,r=t.buffer,i=t.length,s=!!t.decoder,o=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(o)n=r.shift();else if(!e||e>=i)n=s?r.join(""):k.concat(r,i),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=s?"":new k(e);for(var u=0,c=0,l=r.length;l>c&&e>u;c++){var a=r[0],f=Math.min(e-u,a.length);s?n+=a.slice(0,f):a.copy(n,u,0,f),f<a.length?r[0]=a.slice(f):r.shift(),u+=f}}return n}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function _(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function E(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var S=e("isarray"),k=e("buffer").Buffer;i.ReadableState=r;var C=e("events").EventEmitter;C.listenerCount||(C.listenerCount=function(e,t){return e.listeners(t).length});var x=e("stream"),T=e("core-util-is");T.inherits=e("inherits");var A;T.inherits(i,x),i.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new k(e,t),t="")),s(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,"",!0)},i.prototype.setEncoding=function(t){A||(A=e("string_decoder/").StringDecoder),this._readableState.decoder=new A(t),this._readableState.encoding=t;
};var R=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f(this),null;if(e=u(e,t),0===e&&t.ended)return n=null,t.length>0&&t.decoder&&(n=b(e,t),t.length-=n.length),0===t.length&&w(this),n;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=u(r,t)),n=e>0?b(e,t):null,null===n&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&w(this),n},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){e===l&&s()}function i(){e.end()}function s(){e.removeListener("close",a),e.removeListener("finish",u),e.removeListener("drain",d),e.removeListener("error",o),e.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",s),(!e._writableState||e._writableState.needDrain)&&d()}function o(t){c(),e.removeListener("error",o),0===C.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",u),c()}function u(){e.removeListener("close",a),c()}function c(){l.unpipe(e)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,p=h?i:s;f.endEmitted?n.nextTick(p):l.once("end",p),e.on("unpipe",r);var d=m(l);return e.on("drain",d),e._events&&e._events.error?S(e._events.error)?e._events.error.unshift(o):e._events.error=[o,e._events.error]:e.on("error",o),e.once("close",a),e.once("finish",u),e.emit("pipe",l),f.flowing||(this.on("readable",v),f.flowing=!0,n.nextTick(function(){g(l)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=x.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||y(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&f(this,r):this.read(0))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){y(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var s=r.push(i);s||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return _(s,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){n&&(n=!1,e.resume())},r},i._fromList=b}).call(this,e("_process"))},{_process:22,buffer:13,"core-util-is":47,events:17,inherits:48,isarray:49,stream:34,"string_decoder/":50}],45:[function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i&&i(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);a.call(this,e);var t=(this._transformState=new r(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=(e._readableState,e._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=s;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(s,a),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":43,"core-util-is":47,inherits:48}],46:[function(e,t,n){(function(n){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function s(t){var n=e("./_stream_duplex");return this instanceof s||this instanceof n?(this._writableState=new i(t,this),this.writable=!0,void E.call(this)):new s(t)}function o(e,t,r){var i=new Error("write after end");e.emit("error",i),n.nextTick(function(){r(i)})}function a(e,t,r,i){var s=!0;if(!w.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),n.nextTick(function(){i(o)}),s=!1}return s}function u(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new w(t,n)),t}function c(e,t,n,i,s){n=u(t,n,i),w.isBuffer(n)&&(i="buffer");var o=t.objectMode?1:n.length;t.length+=o;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new r(n,i,s)):l(e,t,o,n,i,s),a}function l(e,t,n,r,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1}function f(e,t,r,i,s){r?n.nextTick(function(){s(i)}):s(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if(h(r),t)f(e,r,i,t,s);else{var o=v(e,r);o||r.bufferProcessing||!r.buffer.length||g(e,r),i?n.nextTick(function(){d(e,r,o,s)}):d(e,r,o,s)}}function d(e,t,n,r){n||m(e,t),r(),n&&y(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){t.bufferProcessing=!0;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n],i=r.chunk,s=r.encoding,o=r.callback,a=t.objectMode?1:i.length;if(l(e,t,a,i,s,o),t.writing){n++;break}}t.bufferProcessing=!1,n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}function v(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){var n=v(e,t);return n&&(t.finished=!0,e.emit("finish")),n}function b(e,t,r){t.ending=!0,y(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0}t.exports=s;var w=e("buffer").Buffer;s.WritableState=i;var _=e("core-util-is");_.inherits=e("inherits");var E=e("stream");_.inherits(s,E),s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),w.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?o(this,r,n):a(this,r,e,n)&&(i=c(this,r,e,t,n)),i},s.prototype._write=function(e,t,n){n(new Error("not implemented"))},s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||b(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":43,_process:22,buffer:13,"core-util-is":47,inherits:48,stream:34}],47:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function s(e){return null==e}function o(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===g(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===g(e)}function p(e){return"[object Error]"===g(e)||e instanceof Error}function d(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=s,n.isNumber=o,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=f,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=m,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../../../../../../../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../../../../../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":19}],48:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],49:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],50:[function(e,t,n){arguments[4][35][0].apply(n,arguments)},{buffer:13,dup:35}],51:[function(e,t,n){arguments[4][32][0].apply(n,arguments)},{"./lib/_stream_transform.js":45,dup:32}],52:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var i=Object.prototype.hasOwnProperty},{}],53:[function(e,t,n){(function(n){function r(e){o.call(this,e),this._destroyed=!1}function i(e,t,n){n(null,e)}function s(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=i),"function"!=typeof r&&(r=null),e(t,n,r)}}var o=e("readable-stream/transform"),a=e("util").inherits,u=e("xtend");a(r,o),r.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},t.exports=s(function(e,t,n){var i=new r(e);return i._transform=t,n&&(i._flush=n),i}),t.exports.ctor=s(function(e,t,n){function i(t){return this instanceof i?(this.options=u(e,t),void r.call(this,this.options)):new i(t)}return a(i,r),i.prototype._transform=t,n&&(i.prototype._flush=n),i}),t.exports.obj=s(function(e,t,n){var i=new r(u({objectMode:!0,highWaterMark:16},e));return i._transform=t,n&&(i._flush=n),i})}).call(this,e("_process"))},{_process:22,"readable-stream/transform":51,util:37,xtend:52}],54:[function(e,t,n){var r=e("./escapeRegExp");t.exports=function(e){return null==e?"\\s":e.source?e.source:"["+r(e)+"]"}},{"./escapeRegExp":55}],55:[function(e,t,n){var r=e("./makeString");t.exports=function(e){return r(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":56}],56:[function(e,t,n){t.exports=function(e){return null==e?"":""+e}},{}],57:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/defaultToWhiteSpace"),s=String.prototype.trimLeft;t.exports=function(e,t){return e=r(e),!t&&s?s.call(e):(t=i(t),e.replace(new RegExp("^"+t+"+"),""))}},{"./helper/defaultToWhiteSpace":54,"./helper/makeString":56}],58:[function(e,t,n){e("./trim");t.exports=function(e,t){if(null==e)return 0;var n=Math.pow(10,isFinite(t)?t:0);return Math.round(e*n)/n}},{"./trim":59}],59:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/defaultToWhiteSpace"),s=String.prototype.trim;t.exports=function(e,t){return e=r(e),!t&&s?s.call(e):(t=i(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":54,"./helper/makeString":56}],60:[function(e,t,n){(function(){function e(e){function t(t,n,r,i,s,o){for(;s>=0&&o>s;s+=e){var a=i?i[s]:s;r=n(r,t[a],a,t)}return r}return function(n,r,i,s){r=_(r,s,4);var o=!A(n)&&w.keys(n),a=(o||n).length,u=e>0?0:a-1;return arguments.length<3&&(i=n[o?o[u]:u],u+=e),t(n,r,i,o,u,a)}}function r(e){return function(t,n,r){n=E(n,r);for(var i=T(t),s=e>0?0:i-1;s>=0&&i>s;s+=e)if(n(t[s],s,t))return s;return-1}}function i(e,t,n){return function(r,i,s){var o=0,a=T(r);if("number"==typeof s)e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(h.call(r,o,a),w.isNaN),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&a>s;s+=e)if(r[s]===i)return s;return-1}}function s(e,t){var n=M.length,r=e.constructor,i=w.isFunction(r)&&r.prototype||c,s="constructor";for(w.has(e,s)&&!w.contains(t,s)&&t.push(s);n--;)s=M[n],s in e&&e[s]!==i[s]&&!w.contains(t,s)&&t.push(s)}var o=this,a=o._,u=Array.prototype,c=Object.prototype,l=Function.prototype,f=u.push,h=u.slice,p=c.toString,d=c.hasOwnProperty,m=Array.isArray,g=Object.keys,v=l.bind,y=Object.create,b=function(){},w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=w),n._=w):o._=w,w.VERSION="1.8.3";var _=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}},E=function(e,t,n){return null==e?w.identity:w.isFunction(e)?_(e,t,n):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return E(e,t,1/0)};var S=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;a>u;u++){var c=o[u];t&&void 0!==n[c]||(n[c]=s[c])}return n}},k=function(e){if(!w.isObject(e))return{};if(y)return y(e);b.prototype=e;var t=new b;return b.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},x=Math.pow(2,53)-1,T=C("length"),A=function(e){var t=T(e);return"number"==typeof t&&t>=0&&x>=t};w.each=w.forEach=function(e,t,n){t=_(t,n);var r,i;if(A(e))for(r=0,i=e.length;i>r;r++)t(e[r],r,e);else{var s=w.keys(e);for(r=0,i=s.length;i>r;r++)t(e[s[r]],s[r],e)}return e},w.map=w.collect=function(e,t,n){t=E(t,n);for(var r=!A(e)&&w.keys(e),i=(r||e).length,s=Array(i),o=0;i>o;o++){var a=r?r[o]:o;s[o]=t(e[a],a,e)}return s},w.reduce=w.foldl=w.inject=e(1),w.reduceRight=w.foldr=e(-1),w.find=w.detect=function(e,t,n){var r;return r=A(e)?w.findIndex(e,t,n):w.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},w.filter=w.select=function(e,t,n){var r=[];return t=E(t,n),w.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},w.reject=function(e,t,n){return w.filter(e,w.negate(E(t)),n)},w.every=w.all=function(e,t,n){t=E(t,n);for(var r=!A(e)&&w.keys(e),i=(r||e).length,s=0;i>s;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0},w.some=w.any=function(e,t,n){t=E(t,n);for(var r=!A(e)&&w.keys(e),i=(r||e).length,s=0;i>s;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,n,r){return A(e)||(e=w.values(e)),("number"!=typeof n||r)&&(n=0),w.indexOf(e,t,n)>=0},w.invoke=function(e,t){var n=h.call(arguments,2),r=w.isFunction(t);return w.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,n){var r,i,s=-(1/0),o=-(1/0);if(null==t&&null!=e){e=A(e)?e:w.values(e);for(var a=0,u=e.length;u>a;a++)r=e[a],r>s&&(s=r)}else t=E(t,n),w.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-(1/0)&&s===-(1/0))&&(s=e,o=i)});return s},w.min=function(e,t,n){var r,i,s=1/0,o=1/0;if(null==t&&null!=e){e=A(e)?e:w.values(e);for(var a=0,u=e.length;u>a;a++)r=e[a],s>r&&(s=r)}else t=E(t,n),w.each(e,function(e,n,r){i=t(e,n,r),(o>i||i===1/0&&s===1/0)&&(s=e,o=i)});return s},w.shuffle=function(e){for(var t,n=A(e)?e:w.values(e),r=n.length,i=Array(r),s=0;r>s;s++)t=w.random(0,s),t!==s&&(i[s]=i[t]),i[t]=n[s];return i},w.sample=function(e,t,n){return null==t||n?(A(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,n){return t=E(t,n),w.pluck(w.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var R=function(e){return function(t,n,r){var i={};return n=E(n,r),w.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};w.groupBy=R(function(e,t,n){w.has(e,n)?e[n].push(t):e[n]=[t]}),w.indexBy=R(function(e,t,n){e[n]=t}),w.countBy=R(function(e,t,n){w.has(e,n)?e[n]++:e[n]=1}),w.toArray=function(e){return e?w.isArray(e)?h.call(e):A(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:A(e)?e.length:w.keys(e).length},w.partition=function(e,t,n){t=E(t,n);var r=[],i=[];return w.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},w.first=w.head=w.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,n){return h.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},w.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,n){return h.call(e,null==t||n?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var O=function(e,t,n,r){for(var i=[],s=0,o=r||0,a=T(e);a>o;o++){var u=e[o];if(A(u)&&(w.isArray(u)||w.isArguments(u))){t||(u=O(u,t,n));var c=0,l=u.length;for(i.length+=l;l>c;)i[s++]=u[c++]}else n||(i[s++]=u)}return i};w.flatten=function(e,t){return O(e,t,!1)},w.without=function(e){return w.difference(e,h.call(arguments,1))},w.uniq=w.unique=function(e,t,n,r){w.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=E(n,r));for(var i=[],s=[],o=0,a=T(e);a>o;o++){var u=e[o],c=n?n(u,o,e):u;t?(o&&s===c||i.push(u),s=c):n?w.contains(s,c)||(s.push(c),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(O(arguments,!0,!0))},w.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=T(e);i>r;r++){var s=e[r];if(!w.contains(t,s)){for(var o=1;n>o&&w.contains(arguments[o],s);o++);o===n&&t.push(s)}}return t},w.difference=function(e){var t=O(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,T).length||0,n=Array(t),r=0;t>r;r++)n[r]=w.pluck(e,r);return n},w.object=function(e,t){for(var n={},r=0,i=T(e);i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},w.findIndex=r(1),w.findLastIndex=r(-1),w.sortedIndex=function(e,t,n,r){n=E(n,r,1);for(var i=n(t),s=0,o=T(e);o>s;){var a=Math.floor((s+o)/2);n(e[a])<i?s=a+1:o=a}return s},w.indexOf=i(1,w.findIndex,w.sortedIndex),w.lastIndexOf=i(-1,w.findLastIndex),w.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),s=0;r>s;s++,e+=n)i[s]=e;return i};var L=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var s=k(e.prototype),o=e.apply(s,i);return w.isObject(o)?o:s};w.bind=function(e,t){if(v&&e.bind===v)return v.apply(e,h.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),r=function(){return L(e,r,t,this,n.concat(h.call(arguments)))};return r},w.partial=function(e){var t=h.call(arguments,1),n=function(){for(var r=0,i=t.length,s=Array(i),o=0;i>o;o++)s[o]=t[o]===w?arguments[r++]:t[o];for(;r<arguments.length;)s.push(arguments[r++]);return L(e,n,this,this,s)};return n},w.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=w.bind(e[n],e);return e},w.memoize=function(e,t){var n=function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return w.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},w.delay=function(e,t){var n=h.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,n){var r,i,s,o=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:w.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var c=w.now();a||n.leading!==!1||(a=c);var l=t-(c-a);return r=this,i=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=c,s=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(u,l)),s}},w.debounce=function(e,t,n){var r,i,s,o,a,u=function(){var c=w.now()-o;t>c&&c>=0?r=setTimeout(u,t-c):(r=null,n||(a=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=w.now();var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(a=e.apply(s,i),s=i=null),a}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},w.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},w.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},w.once=w.partial(w.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(g)return g(e);var t=[];for(var n in e)w.has(e,n)&&t.push(n);return j&&s(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var n in e)t.push(n);return j&&s(e,t),t},w.values=function(e){for(var t=w.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},w.mapObject=function(e,t,n){t=E(t,n);for(var r,i=w.keys(e),s=i.length,o={},a=0;s>a;a++)r=i[a],o[r]=t(e[r],r,e);return o},w.pairs=function(e){for(var t=w.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},w.invert=function(e){for(var t={},n=w.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},w.functions=w.methods=function(e){var t=[];for(var n in e)w.isFunction(e[n])&&t.push(n);return t.sort()},w.extend=S(w.allKeys),w.extendOwn=w.assign=S(w.keys),w.findKey=function(e,t,n){t=E(t,n);for(var r,i=w.keys(e),s=0,o=i.length;o>s;s++)if(r=i[s],t(e[r],r,e))return r},w.pick=function(e,t,n){var r,i,s={},o=e;if(null==o)return s;w.isFunction(t)?(i=w.allKeys(o),r=_(t,n)):(i=O(arguments,!1,!1,1),r=function(e,t,n){return t in n},o=Object(o));for(var a=0,u=i.length;u>a;a++){var c=i[a],l=o[c];r(l,c,o)&&(s[c]=l)}return s},w.omit=function(e,t,n){if(w.isFunction(t))t=w.negate(t);else{var r=w.map(O(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(r,t)}}return w.pick(e,t,n)},w.defaults=S(w.allKeys,!0),w.create=function(e,t){var n=k(e);return t&&w.extendOwn(n,t),n},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var n=w.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),s=0;r>s;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var N=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===i;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),s){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!N(e[u],t[u],n,r))return!1}else{var c,l=w.keys(e);if(u=l.length,w.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!w.has(t,c)||!N(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(e,t){return N(e,t)},w.isEmpty=function(e){return null==e?!0:A(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=m||function(e){return"[object Array]"===p.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===p.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&d.call(e,t)},w.noConflict=function(){return o._=a,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=C,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,n){var r=Array(Math.max(0,e));t=_(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},U=w.invert(P),I=function(e){var t=function(t){return e[t]},n="(?:"+w.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};w.escape=I(P),w.unescape=I(U),w.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),w.isFunction(r)?r.call(e):r};var D=0;w.uniqueId=function(e){var t=++D+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return"\\"+B[e]};w.template=function(e,t,n){!t&&n&&(t=n),t=w.defaults({},t,w.templateSettings);var r=RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,a){return s+=e.slice(i,a).replace(W,F),i=a+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(a){throw a.source=s,a}var u=function(e){return o.call(this,e,w)},c=t.variable||"obj";return u.source="function("+c+"){\n"+s+"}",u},w.chain=function(e){var t=w(e);return t._chain=!0,t};var Y=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var n=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return f.apply(e,arguments),Y(this,n.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];w.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Y(this,n)}}),w.each(["concat","join","slice"],function(e){var t=u[e];w.prototype[e]=function(){return Y(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return w})}).call(this)},{}]},{},[1]);
//# sourceMappingURL=tmi.js.map